pipeline {
    agent any
    stages {
        stage('Checkout') {
            steps {
                git 'https://github.com/Charbelto/jenkins_project.git'
            }
        }
        stage('Setup') {
            steps {
                // Update Python path with the correct path on your system
                bat 'C:\\Python39\\python.exe -m venv venv'
                bat 'venv\\Scripts\\activate.bat && pip install --upgrade pip'
                bat 'venv\\Scripts\\activate.bat && pip install -r requirements.txt'
            }
        }
        stage('Security Scan') {
            steps {
                // Example command
                bat 'venv\\Scripts\\activate.bat && safety check'
            }
        }
        stage('Coverage Analysis') {
            steps {
                // Example coverage command
                bat 'venv\\Scripts\\activate.bat && coverage run -m unittest discover'
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying application...'
                // Add deployment commands here
            }
        }
    }
    post {
        always {
            cleanWs()
            echo 'Pipeline completed!'
        }
        failure {
            echo 'Pipeline failed!'
        }
    }
}
